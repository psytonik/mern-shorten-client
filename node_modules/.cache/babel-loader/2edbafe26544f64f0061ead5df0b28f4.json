{"ast":null,"code":"import _regeneratorRuntime from\"/Users/anthonyfink/Work/mern-shorten/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/anthonyfink/Work/mern-shorten/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/anthonyfink/Work/mern-shorten/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useCallback}from\"react\";export var useHttp=function useHttp(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),error=_useState4[0],setError=_useState4[1];var request=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var method,body,headers,response,data,parsedError,_args=arguments;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:method=_args.length>1&&_args[1]!==undefined?_args[1]:'GET';body=_args.length>2&&_args[2]!==undefined?_args[2]:null;headers=_args.length>3&&_args[3]!==undefined?_args[3]:{};setLoading(true);_context.prev=4;if(body){body=JSON.stringify(body);headers['Content-Type']='application/json';}_context.next=8;return fetch(url,{method:method,body:body,headers:headers});case 8:response=_context.sent;_context.next=11;return response.json();case 11:data=_context.sent;if(!(!data.statusText===\"OK\")){_context.next=14;break;}throw new Error('Something going wrong');case 14:setLoading(false);return _context.abrupt(\"return\",data);case 18:_context.prev=18;_context.t0=_context[\"catch\"](4);parsedError=JSON.parse(_context.t0.request.response);setLoading(false);setError(parsedError.message);throw parsedError.message;case 24:case\"end\":return _context.stop();}}},_callee,null,[[4,18]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[]);var clearErrors=useCallback(function(){return setError(null);},[]);return{loading:loading,request:request,error:error,clearErrors:clearErrors};};","map":{"version":3,"names":["useState","useCallback","useHttp","loading","setLoading","error","setError","request","url","method","body","headers","JSON","stringify","fetch","response","json","data","statusText","Error","parsedError","parse","message","clearErrors"],"sources":["/Users/anthonyfink/Work/mern-shorten/client/src/shared/hooks/http.hook.js"],"sourcesContent":["import {useState,useCallback} from \"react\";\n\nexport const useHttp = () => {\n\tconst [loading, setLoading] = useState(false);\n\tconst [error, setError] = useState(null);\n\n\tconst request = useCallback(async (url,method = 'GET', body = null,headers = {}) => {\n\t\tsetLoading(true);\n\t\ttry {\n\t\t\tif(body){\n\t\t\t\tbody  = JSON.stringify(body);\n\t\t\t\theaders['Content-Type'] = 'application/json';\n\t\t\t}\n\t\t\tconst response = await fetch(url, {method,body,headers});\n\t\t\tconst data = await response.json();\n\t\t\tif(!data.statusText === \"OK\"){\n\t\t\t\tthrow new Error('Something going wrong');\n\t\t\t}\n\t\t\tsetLoading(false)\n\t\t\treturn data;\n\t\t} catch (error) {\n\t\t\tconst parsedError = JSON.parse(error.request.response);\n\t\t\tsetLoading(false);\n\t\t\tsetError(parsedError.message)\n\t\t\tthrow parsedError.message\n\t\t}\n\t},[])\n\n\tconst clearErrors = useCallback(() => setError(null),[]);\n\n\treturn {loading,request,error, clearErrors}\n}\n"],"mappings":"mZAAA,OAAQA,QAAR,CAAiBC,WAAjB,KAAmC,OAAnC,CAEA,MAAO,IAAMC,QAAO,CAAG,QAAVA,QAAU,EAAM,CAC5B,cAA8BF,QAAQ,CAAC,KAAD,CAAtC,wCAAOG,OAAP,eAAgBC,UAAhB,eACA,eAA0BJ,QAAQ,CAAC,IAAD,CAAlC,yCAAOK,KAAP,eAAcC,QAAd,eAEA,GAAMC,QAAO,CAAGN,WAAW,4FAAC,iBAAOO,GAAP,sLAAWC,MAAX,+CAAoB,KAApB,CAA2BC,IAA3B,+CAAkC,IAAlC,CAAuCC,OAAvC,+CAAiD,EAAjD,CAC3BP,UAAU,CAAC,IAAD,CAAV,CAD2B,gBAG1B,GAAGM,IAAH,CAAQ,CACPA,IAAI,CAAIE,IAAI,CAACC,SAAL,CAAeH,IAAf,CAAR,CACAC,OAAO,CAAC,cAAD,CAAP,CAA0B,kBAA1B,CACA,CANyB,sBAOHG,MAAK,CAACN,GAAD,CAAM,CAACC,MAAM,CAANA,MAAD,CAAQC,IAAI,CAAJA,IAAR,CAAaC,OAAO,CAAPA,OAAb,CAAN,CAPF,QAOpBI,QAPoB,sCAQPA,SAAQ,CAACC,IAAT,EARO,SAQpBC,IARoB,oBASvB,CAACA,IAAI,CAACC,UAAN,GAAqB,IATE,gCAUnB,IAAIC,MAAJ,CAAU,uBAAV,CAVmB,SAY1Bf,UAAU,CAAC,KAAD,CAAV,CAZ0B,gCAanBa,IAbmB,4DAepBG,WAfoB,CAeNR,IAAI,CAACS,KAAL,CAAW,YAAMd,OAAN,CAAcQ,QAAzB,CAfM,CAgB1BX,UAAU,CAAC,KAAD,CAAV,CACAE,QAAQ,CAACc,WAAW,CAACE,OAAb,CAAR,CAjB0B,KAkBpBF,YAAW,CAACE,OAlBQ,sEAAD,+DAoBzB,EApByB,CAA3B,CAsBA,GAAMC,YAAW,CAAGtB,WAAW,CAAC,iBAAMK,SAAQ,CAAC,IAAD,CAAd,EAAD,CAAsB,EAAtB,CAA/B,CAEA,MAAO,CAACH,OAAO,CAAPA,OAAD,CAASI,OAAO,CAAPA,OAAT,CAAiBF,KAAK,CAALA,KAAjB,CAAwBkB,WAAW,CAAXA,WAAxB,CAAP,CACA,CA7BM"},"metadata":{},"sourceType":"module"}