{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nconst storageName = 'userData';\nexport const useAuth = () => {\n  _s();\n\n  const [token, setToken] = useState(null);\n  const [ready, setReady] = useState(false);\n  const [userId, setUserId] = useState(null);\n  const login = useCallback(async (jwtToken, id) => {\n    setToken(jwtToken);\n    setUserId(id);\n    localStorage.setItem(storageName, JSON.stringify({\n      token: jwtToken,\n      userId: id\n    }));\n  }, []);\n  const logOut = useCallback(async () => {\n    setToken(null);\n    setUserId(null);\n    localStorage.removeItem(storageName);\n  }, []);\n  useEffect(() => {\n    const data = JSON.parse(localStorage.getItem(storageName));\n\n    if (data && data.token) {\n      login(data.token, data.userId).then(r => r);\n    }\n\n    setReady(true);\n  }, [login]);\n  return {\n    login,\n    logOut,\n    token,\n    userId,\n    ready\n  };\n};\n\n_s(useAuth, \"AQI0ztRtxkilRmMQEymz9ggoSBg=\");","map":{"version":3,"sources":["/Users/anthonyfink/Work/mern-shorten/client/src/shared/hooks/auth.hook.js"],"names":["useCallback","useEffect","useState","storageName","useAuth","token","setToken","ready","setReady","userId","setUserId","login","jwtToken","id","localStorage","setItem","JSON","stringify","logOut","removeItem","data","parse","getItem","then","r"],"mappings":";;AAAA,SAAQA,WAAR,EAAqBC,SAArB,EAAgCC,QAAhC,QAA+C,OAA/C;AAEA,MAAMC,WAAW,GAAG,UAApB;AACA,OAAO,MAAMC,OAAO,GAAG,MAAM;AAAA;;AAC5B,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBJ,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAACO,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,IAAD,CAApC;AAEA,QAAMS,KAAK,GAAGX,WAAW,CAAC,OAAMY,QAAN,EAAeC,EAAf,KAAoB;AAC7CP,IAAAA,QAAQ,CAACM,QAAD,CAAR;AACAF,IAAAA,SAAS,CAACG,EAAD,CAAT;AACAC,IAAAA,YAAY,CAACC,OAAb,CAAqBZ,WAArB,EAAiCa,IAAI,CAACC,SAAL,CAAe;AAACZ,MAAAA,KAAK,EAACO,QAAP;AAAgBH,MAAAA,MAAM,EAACI;AAAvB,KAAf,CAAjC;AACA,GAJwB,EAIvB,EAJuB,CAAzB;AAKA,QAAMK,MAAM,GAAGlB,WAAW,CAAC,YAAS;AACnCM,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAI,IAAAA,SAAS,CAAC,IAAD,CAAT;AACAI,IAAAA,YAAY,CAACK,UAAb,CAAwBhB,WAAxB;AACA,GAJyB,EAIxB,EAJwB,CAA1B;AAKAF,EAAAA,SAAS,CAAC,MAAI;AACb,UAAMmB,IAAI,GAAGJ,IAAI,CAACK,KAAL,CAAWP,YAAY,CAACQ,OAAb,CAAqBnB,WAArB,CAAX,CAAb;;AACA,QAAGiB,IAAI,IAAIA,IAAI,CAACf,KAAhB,EAAsB;AACrBM,MAAAA,KAAK,CAACS,IAAI,CAACf,KAAN,EAAae,IAAI,CAACX,MAAlB,CAAL,CAA+Bc,IAA/B,CAAoCC,CAAC,IAAGA,CAAxC;AACA;;AACDhB,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACA,GANQ,EAMP,CAACG,KAAD,CANO,CAAT;AAOA,SAAO;AAACA,IAAAA,KAAD;AAAOO,IAAAA,MAAP;AAAcb,IAAAA,KAAd;AAAoBI,IAAAA,MAApB;AAA2BF,IAAAA;AAA3B,GAAP;AACA,CAvBM;;GAAMH,O","sourcesContent":["import {useCallback, useEffect, useState} from \"react\";\n\nconst storageName = 'userData'\nexport const useAuth = () => {\n\tconst [token, setToken] = useState(null);\n\tconst [ready, setReady] = useState(false);\n\tconst [userId, setUserId] = useState(null);\n\n\tconst login = useCallback(async(jwtToken,id)=>{\n\t\tsetToken(jwtToken)\n\t\tsetUserId(id)\n\t\tlocalStorage.setItem(storageName,JSON.stringify({token:jwtToken,userId:id}))\n\t},[])\n\tconst logOut = useCallback(async()=>{\n\t\tsetToken(null)\n\t\tsetUserId(null)\n\t\tlocalStorage.removeItem(storageName);\n\t},[])\n\tuseEffect(()=>{\n\t\tconst data = JSON.parse(localStorage.getItem(storageName))\n\t\tif(data && data.token){\n\t\t\tlogin(data.token, data.userId).then(r =>r);\n\t\t}\n\t\tsetReady(true);\n\t},[login])\n\treturn {login,logOut,token,userId,ready};\n}\n"]},"metadata":{},"sourceType":"module"}