{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nconst storageName = 'userData';\nexport const useAuth = () => {\n  _s();\n\n  const [token, setToken] = useState(null);\n  const [ready, setReady] = useState(false);\n  const [userId, setUserId] = useState(null);\n  const login = useCallback(async (jwtToken, id) => {\n    setToken(jwtToken);\n    setUserId(id);\n    sessionStorage.setItem(storageName, JSON.stringify({\n      token: jwtToken,\n      userId: id\n    }));\n  }, []);\n  const logOut = useCallback(async () => {\n    setToken(null);\n    setUserId(null);\n    sessionStorage.removeItem(storageName);\n  }, []);\n  useEffect(() => {\n    const data = JSON.parse(sessionStorage.getItem(storageName));\n\n    if (data && data.token) {\n      login(data.token, data.userId).then(r => r);\n    }\n\n    setReady(true);\n  }, [login]);\n  return {\n    login,\n    logOut,\n    token,\n    userId,\n    ready\n  };\n};\n\n_s(useAuth, \"AQI0ztRtxkilRmMQEymz9ggoSBg=\");","map":{"version":3,"names":["useCallback","useEffect","useState","storageName","useAuth","token","setToken","ready","setReady","userId","setUserId","login","jwtToken","id","sessionStorage","setItem","JSON","stringify","logOut","removeItem","data","parse","getItem","then","r"],"sources":["/Users/anthonyfink/Work/mern-shorten/client/src/shared/hooks/auth.hook.js"],"sourcesContent":["import {useCallback, useEffect, useState} from \"react\";\n\nconst storageName = 'userData'\nexport const useAuth = () => {\n\tconst [token, setToken] = useState(null);\n\tconst [ready, setReady] = useState(false);\n\tconst [userId, setUserId] = useState(null);\n\n\tconst login = useCallback(async(jwtToken,id)=>{\n\t\tsetToken(jwtToken)\n\t\tsetUserId(id)\n\n\t\tsessionStorage.setItem(storageName,JSON.stringify({token:jwtToken,userId:id}))\n\t},[]);\n\n\tconst logOut = useCallback(async()=>{\n\t\tsetToken(null)\n\t\tsetUserId(null)\n\t\tsessionStorage.removeItem(storageName);\n\t},[]);\n\n\tuseEffect(()=>{\n\t\tconst data = JSON.parse(sessionStorage.getItem(storageName))\n\t\tif(data && data.token){\n\t\t\tlogin(data.token, data.userId).then(r =>r);\n\t\t}\n\t\tsetReady(true);\n\t},[login]);\n\n\treturn {login,logOut,token,userId,ready};\n}\n"],"mappings":";;AAAA,SAAQA,WAAR,EAAqBC,SAArB,EAAgCC,QAAhC,QAA+C,OAA/C;AAEA,MAAMC,WAAW,GAAG,UAApB;AACA,OAAO,MAAMC,OAAO,GAAG,MAAM;EAAA;;EAC5B,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBJ,QAAQ,CAAC,IAAD,CAAlC;EACA,MAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,KAAD,CAAlC;EACA,MAAM,CAACO,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,IAAD,CAApC;EAEA,MAAMS,KAAK,GAAGX,WAAW,CAAC,OAAMY,QAAN,EAAeC,EAAf,KAAoB;IAC7CP,QAAQ,CAACM,QAAD,CAAR;IACAF,SAAS,CAACG,EAAD,CAAT;IAEAC,cAAc,CAACC,OAAf,CAAuBZ,WAAvB,EAAmCa,IAAI,CAACC,SAAL,CAAe;MAACZ,KAAK,EAACO,QAAP;MAAgBH,MAAM,EAACI;IAAvB,CAAf,CAAnC;EACA,CALwB,EAKvB,EALuB,CAAzB;EAOA,MAAMK,MAAM,GAAGlB,WAAW,CAAC,YAAS;IACnCM,QAAQ,CAAC,IAAD,CAAR;IACAI,SAAS,CAAC,IAAD,CAAT;IACAI,cAAc,CAACK,UAAf,CAA0BhB,WAA1B;EACA,CAJyB,EAIxB,EAJwB,CAA1B;EAMAF,SAAS,CAAC,MAAI;IACb,MAAMmB,IAAI,GAAGJ,IAAI,CAACK,KAAL,CAAWP,cAAc,CAACQ,OAAf,CAAuBnB,WAAvB,CAAX,CAAb;;IACA,IAAGiB,IAAI,IAAIA,IAAI,CAACf,KAAhB,EAAsB;MACrBM,KAAK,CAACS,IAAI,CAACf,KAAN,EAAae,IAAI,CAACX,MAAlB,CAAL,CAA+Bc,IAA/B,CAAoCC,CAAC,IAAGA,CAAxC;IACA;;IACDhB,QAAQ,CAAC,IAAD,CAAR;EACA,CANQ,EAMP,CAACG,KAAD,CANO,CAAT;EAQA,OAAO;IAACA,KAAD;IAAOO,MAAP;IAAcb,KAAd;IAAoBI,MAApB;IAA2BF;EAA3B,CAAP;AACA,CA3BM;;GAAMH,O"},"metadata":{},"sourceType":"module"}